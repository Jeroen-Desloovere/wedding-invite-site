<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>You're Invited</title>

<style>
:root{
  --text:rgba(255,255,255,.92);
  --muted:rgba(255,255,255,.7);
  --line:rgba(255,255,255,.2);
  --radius:18px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  color:var(--text);
  min-height:100vh;
  overflow-x:hidden;
}
body::before{
  content:"";
  position:fixed; inset:0;
  background:
    linear-gradient(rgba(0,0,0,.65),rgba(0,0,0,.65)),
    url("bg.png") center/cover no-repeat;
  z-index:-1;
}
.wrap{max-width:900px;margin:auto;padding:20px}
.card{
  background:rgba(0,0,0,.45);
  backdrop-filter:blur(8px);
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:28px;
}
h1{font-size:44px;margin:0 0 10px}
h2{margin-top:0}
.countdown{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:10px;
  margin:20px 0;
}
.box{
  text-align:center;
  padding:12px;
  background:rgba(255,255,255,.1);
  border-radius:12px;
}
.btn{
  padding:12px 18px;
  border-radius:999px;
  background:white;
  color:black;
  border:none;
  font-weight:600;
  cursor:pointer;
}
input,select,textarea{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid var(--line);
  background:rgba(0,0,0,.4);
  color:white;
  margin-bottom:12px;
}
.status{margin-top:10px;color:var(--muted)}
</style>
</head>

<body>

<!-- Envelope intro -->
<div id="intro" style="position:fixed;inset:0;background:black;display:grid;place-items:center;z-index:9999">
  <div style="color:white;font-size:22px">Opening Invitation...</div>
</div>

<div class="wrap">
  <div class="card">
    <h1>Youâ€™re Invited</h1>

    <div class="countdown">
      <div class="box"><div id="d">--</div><small>Days</small></div>
      <div class="box"><div id="h">--</div><small>Hours</small></div>
      <div class="box"><div id="m">--</div><small>Minutes</small></div>
      <div class="box"><div id="s">--</div><small>Seconds</small></div>
    </div>

    <h2>RSVP</h2>

    <!-- NETLIFY FORM -->
    <form name="rsvp"
          id="rsvpForm"
          method="POST"
          data-netlify="true"
          data-netlify-honeypot="website">

      <input type="hidden" name="form-name" value="rsvp">
      <input type="text" name="website" style="display:none">

      <input name="name" required placeholder="Your Name">
      <input name="email" type="email" placeholder="Email (optional)">

      <select name="attending" required>
        <option value="" disabled selected>Will you attend?</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
        <option value="maybe">Maybe</option>
      </select>

      <textarea name="message" placeholder="Message"></textarea>

      <button class="btn" id="submitBtn">Send RSVP</button>
      <div class="status" id="status"></div>
    </form>
  </div>
</div>

<script>
// Intro animation
window.addEventListener("load",()=>{
  setTimeout(()=>{
    document.getElementById("intro").style.opacity="0";
    setTimeout(()=>{
      document.getElementById("intro").remove();
    },600);
  },1200);
});

// Countdown
const target=new Date("2026-09-05T15:00:00+02:00").getTime();
function tick(){
  const now=Date.now();
  const diff=Math.max(0,target-now)/1000;
  document.getElementById("d").textContent=Math.floor(diff/86400);
  document.getElementById("h").textContent=Math.floor(diff%86400/3600);
  document.getElementById("m").textContent=Math.floor(diff%3600/60);
  document.getElementById("s").textContent=Math.floor(diff%60);
}
setInterval(tick,1000); tick();

// NETLIFY AJAX SUBMIT
const form=document.getElementById("rsvpForm");
const status=document.getElementById("status");
const btn=document.getElementById("submitBtn");

form.addEventListener("submit",async(e)=>{
  e.preventDefault();
  status.textContent="Sending...";
  btn.disabled=true;

  const data=new FormData(form);

  if(data.get("website")){
    status.textContent="Spam detected.";
    btn.disabled=false;
    return;
  }

  try{
    await fetch("/",{
      method:"POST",
      body:data
    });

    status.textContent="Thanks! Your RSVP has been received.";
    form.reset();
  }catch(err){
    status.textContent="Could not send RSVP. Please try again.";
  }

  btn.disabled=false;
});
</script>

</body>
</html>
